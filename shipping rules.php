/* This macro will be parsed as PHP code (see http://www.php.net)

The calculateshipping function is called every time a shipping calculation request is made by Shopify.

The function must return an array of available shipping options, otherwise no shipping options will be returned to your customers.
*/
function calculateshipping($DATA) {

	/* do not edit above this line */

	/*
	NB: only select php functions are allowed. Use of anything else will return a syntax error when you try to save. Consult the user guide at http://www.parcelintelligence.com.au/cs/user_guide.pdf for more information
	*/

	//this holds the rates that will be returned to your customer
	$_RATES = array();

	/*
	this is what $DATA looks like, you can use any of the info in $DATA to generate your shipping rate
	Array
	(
		[origin] => Array
			(
				[country] => AU
				[postal_code] => 3000
				[province] => VIC
				[city] => melbourne
				[name] =>
				[address1] => 1 main street
				[address2] =>
				[address3] =>
				[phone] =>
				[fax] =>
				[address_type] =>
				[company_name] =>
			)

		[destination] => Array
			(
				[country] => AU
				[postal_code] => 2000
				[province] => NSW
				[city] =>
				[name] =>
				[address1] =>
				[address2] =>
				[address3] =>
				[phone] =>
				[fax] =>
				[address_type] =>
				[company_name] =>
			)

		[items] => Array
			(
				[0] => Array
					(
						[name] => product10
						[sku] => SKUP00310
						[quantity] => 1
						[grams] => 1000
						[price] => 300
						[vendor] => PRODUCT
						[requires_shipping] => 1
						[taxable] => 1
						[fulfillment_service] => manual
						[product_id] => 128436738
						[variant_id] => 290813760
					)

				[1] => Array
					(
						[name] => product11
						[sku] => SKUP0011
						[quantity] => 1
						[grams] => 1100
						[price] => 300
						[vendor] => PRODUCT
						[requires_shipping] => 1
						[taxable] => 1
						[fulfillment_service] => manual
						[product_id] => 128436744
						[variant_id] => 290813772
					)

			)

		[currency] => AUD
	)

	//this is how you insert a rate
	$_RATES[] = array(
		"service_name" => "Standard Shipping", //this is what the customer will see
		"service_code" => "STANDARD_SHIPPING", //can be anything you like
		"total_price" => 10000, //in cents
		"currency" => "AUD",
	);
	*/


	$localZips = ['00544', '06001', '06002', '06006', '06010', '06011', '06013', '06016', '06018', '06019', '06020', '06021', '06022', '06023', '06024', '06025', '06026', '06027', '06028', '06030', '06031', '06032', '06033', '06034', '06035',
	              '06037', '06039', '06040', '06041', '06042', '06045', '06050', '06051', '06052', '06053', '06057', '06058', '06059', '06060', '06061', '06062', '06063', '06064', '06065', '06067', '06068', '06069', '06070', '06073', '06074',
	              '06078', '06079', '06080', '06081', '06082', '06083', '06085', '06087', '06088', '06089', '06090', '06091', '06092', '06093', '06094', '06095', '06096', '06098', '06101', '06102', '06103', '06104', '06105', '06106', '06107',
	              '06108', '06109', '06110', '06111', '06112', '06114', '06115', '06117', '06118', '06119', '06120', '06123', '06126', '06127', '06128', '06129', '06131', '06132', '06133', '06134', '06137', '06138', '06140', '06141', '06142',
	              '06143', '06144', '06145', '06146', '06147', '06150', '06151', '06152', '06153', '06154', '06155', '06156', '06160', '06161', '06167', '06176', '06180', '06183', '06199', '06390', '06401', '06403', '06404', '06405', '06408',
	              '06409', '06410', '06411', '06412', '06413', '06414', '06415', '06416', '06417', '06418', '06419', '06422', '06423', '06424', '06426', '06437', '06438', '06440', '06441', '06442', '06443', '06444', '06447', '06450', '06451',
	              '06455', '06456', '06457', '06459', '06460', '06461', '06467', '06468', '06469', '06470', '06471', '06472', '06473', '06475', '06477', '06478', '06479', '06480', '06481', '06482', '06483', '06484', '06487', '06488', '06489',
	              '06491', '06492', '06493', '06494', '06495', '06498', '06501', '06502', '06503', '06504', '06505', '06506', '06507', '06508', '06509', '06510', '06511', '06512', '06513', '06514', '06515', '06516', '06517', '06518', '06519',
	              '06520', '06521', '06524', '06525', '06530', '06531', '06532', '06533', '06534', '06535', '06536', '06537', '06538', '06540', '06601', '06602', '06604', '06605', '06606', '06607', '06608', '06610', '06611', '06612', '06614',
	              '06615', '06673', '06699', '06701', '06702', '06703', '06704', '06705', '06706', '06708', '06710', '06712', '06716', '06720', '06721', '06722', '06723', '06724', '06725', '06726', '06749', '06750', '06751', '06752', '06753',
	              '06754', '06755', '06756', '06757', '06758', '06759', '06762', '06763', '06770', '06776', '06777', '06778', '06779', '06781', '06782', '06783', '06784', '06785', '06786', '06787', '06790', '06791', '06792', '06793', '06794',
	              '06795', '06796', '06798', '06801', '06804', '06807', '06810', '06811', '06812', '06813', '06814', '06816', '06817', '06820', '06824', '06825', '06828', '06829', '06830', '06831', '06836', '06838', '06840', '06850', '06851',
	              '06852', '06853', '06854', '06855', '06856', '06857', '06858', '06860', '06870', '06875', '06876', '06877', '06878', '06879', '06880', '06881', '06883', '06888', '06889', '06890', '06896', '06897', '06901', '06902', '06903',
	              '06904', '06905', '06906', '06907', '06910', '06911', '06912', '06913', '06914', '06920', '06921', '06922', '06926', '06927', '07001', '07002', '07003', '07004', '07005', '07006', '07007', '07008', '07009', '07010', '07011',
	              '07012', '07013', '07014', '07015', '07016', '07017', '07018', '07019', '07020', '07021', '07022', '07023', '07024', '07026', '07027', '07028', '07029', '07030', '07031', '07032', '07033', '07034', '07035', '07036', '07039',
	              '07040', '07041', '07042', '07043', '07044', '07045', '07046', '07047', '07050', '07051', '07052', '07054', '07055', '07057', '07058', '07059', '07060', '07061', '07062', '07063', '07064', '07065', '07066', '07067', '07068',
	              '07069', '07070', '07071', '07072', '07073', '07074', '07075', '07076', '07077', '07078', '07079', '07080', '07081', '07082', '07083', '07086', '07087', '07088', '07090', '07091', '07092', '07093', '07094', '07095', '07096',
	              '07097', '07099', '07101', '07102', '07103', '07104', '07105', '07106', '07107', '07108', '07109', '07110', '07111', '07112', '07114', '07175', '07184', '07188', '07189', '07191', '07192', '07193', '07195', '07198', '07199',
	              '07201', '07202', '07203', '07204', '07205', '07206', '07207', '07208', '07302', '07303', '07304', '07305', '07306', '07307', '07308', '07310', '07311', '07395', '07399', '07401', '07403', '07405', '07407', '07410', '07416',
	              '07417', '07418', '07419', '07420', '07421', '07422', '07423', '07424', '07428', '07430', '07432', '07435', '07436', '07438', '07439', '07440', '07442', '07444', '07446', '07450', '07451', '07452', '07456', '07457', '07458',
	              '07460', '07461', '07462', '07463', '07465', '07470', '07474', '07480', '07481', '07495', '07501', '07502', '07503', '07504', '07505', '07506', '07507', '07508', '07509', '07510', '07511', '07512', '07513', '07514', '07522',
	              '07524', '07533', '07538', '07543', '07544', '07601', '07602', '07603', '07604', '07605', '07606', '07607', '07608', '07620', '07621', '07624', '07626', '07627', '07628', '07630', '07631', '07632', '07640', '07641', '07642',
	              '07643', '07644', '07645', '07646', '07647', '07648', '07649', '07650', '07652', '07653', '07656', '07657', '07660', '07661', '07662', '07663', '07666', '07670', '07675', '07676', '07677', '07699', '07701', '07702', '07703',
	              '07704', '07710', '07711', '07712', '07715', '07716', '07717', '07718', '07719', '07720', '07721', '07722', '07723', '07724', '07726', '07727', '07728', '07730', '07731', '07732', '07733', '07734', '07735', '07737', '07738',
	              '07739', '07740', '07746', '07747', '07748', '07750', '07751', '07752', '07753', '07754', '07755', '07756', '07757', '07758', '07760', '07762', '07763', '07764', '07765', '07799', '07801', '07802', '07803', '07806', '07820',
	              '07821', '07822', '07823', '07825', '07826', '07827', '07828', '07829', '07830', '07831', '07832', '07833', '07834', '07836', '07837', '07838', '07839', '07840', '07842', '07843', '07844', '07845', '07846', '07847', '07848',
	              '07849', '07850', '07851', '07852', '07853', '07855', '07856', '07857', '07860', '07863', '07865', '07866', '07869', '07870', '07871', '07874', '07875', '07876', '07877', '07878', '07879', '07880', '07881', '07882', '07885',
	              '07890', '07901', '07902', '07920', '07921', '07922', '07924', '07926', '07927', '07928', '07930', '07931', '07932', '07933', '07934', '07935', '07936', '07938', '07939', '07940', '07945', '07946', '07950', '07960', '07961',
	              '07962', '07963', '07970', '07974', '07976', '07977', '07978', '07979', '07980', '07981', '07999', '08002', '08003', '08004', '08005', '08006', '08007', '08008', '08009', '08010', '08011', '08012', '08015', '08016', '08018',
	              '08019', '08021', '08022', '08026', '08029', '08030', '08031', '08033', '08034', '08035', '08036', '08037', '08041', '08042', '08043', '08045', '08046', '08048', '08049', '08050', '08052', '08053', '08054', '08055', '08057',
	              '08059', '08060', '08064', '08065', '08068', '08073', '08075', '08076', '08077', '08078', '08081', '08083', '08084', '08087', '08088', '08089', '08091', '08092', '08094', '08095', '08099', '08101', '08102', '08103', '08104',
	              '08105', '08106', '08107', '08108', '08109', '08110', '08201', '08202', '08203', '08204', '08205', '08210', '08212', '08213', '08214', '08215', '08217', '08218', '08219', '08220', '08221', '08223', '08224', '08225', '08226',
	              '08230', '08231', '08232', '08234', '08240', '08241', '08242', '08243', '08244', '08245', '08246', '08247', '08248', '08250', '08251', '08252', '08260', '08270', '08310', '08317', '08319', '08326', '08330', '08340', '08341',
	              '08342', '08344', '08346', '08350', '08360', '08401', '08402', '08403', '08404', '08405', '08406', '08501', '08502', '08504', '08505', '08510', '08511', '08512', '08514', '08515', '08518', '08520', '08525', '08526', '08527',
	              '08528', '08530', '08533', '08534', '08535', '08536', '08540', '08541', '08542', '08543', '08544', '08550', '08551', '08553', '08554', '08555', '08556', '08557', '08558', '08559', '08560', '08561', '08562', '08601', '08602',
	              '08603', '08604', '08605', '08606', '08607', '08608', '08609', '08610', '08611', '08618', '08619', '08620', '08625', '08628', '08629', '08638', '08640', '08641', '08644', '08645', '08646', '08647', '08648', '08650', '08666',
	              '08690', '08691', '08695', '08701', '08720', '08721', '08722', '08723', '08724', '08730', '08731', '08732', '08733', '08734', '08735', '08736', '08738', '08739', '08740', '08741', '08742', '08750', '08751', '08752', '08753',
	              '08754', '08755', '08756', '08757', '08758', '08759', '08801', '08802', '08803', '08804', '08805', '08807', '08808', '08809', '08810', '08812', '08816', '08817', '08818', '08820', '08821', '08822', '08823', '08824', '08825',
	              '08826', '08827', '08828', '08829', '08830', '08831', '08832', '08833', '08834', '08835', '08836', '08837', '08840', '08844', '08846', '08848', '08850', '08852', '08853', '08854', '08855', '08857', '08858', '08859', '08861',
	              '08862', '08863', '08865', '08867', '08868', '08869', '08870', '08871', '08872', '08873', '08875', '08876', '08879', '08880', '08882', '08884', '08885', '08886', '08887', '08888', '08889', '08890', '08899', '08901', '08902',
	              '08903', '08904', '08906', '08933', '08989', '10001', '10002', '10003', '10004', '10005', '10006', '10007', '10008', '10009', '10010', '10011', '10012', '10013', '10014', '10016', '10017', '10018', '10019', '10020', '10021',
	              '10022', '10023', '10024', '10025', '10026', '10027', '10028', '10029', '10030', '10031', '10032', '10033', '10034', '10035', '10036', '10037', '10038', '10039', '10040', '10041', '10043', '10044', '10045', '10055', '10060',
	              '10065', '10069', '10075', '10080', '10081', '10087', '10090', '10101', '10102', '10103', '10104', '10105', '10106', '10107', '10108', '10109', '10110', '10111', '10112', '10113', '10114', '10115', '10116', '10117', '10118',
	              '10119', '10120', '10121', '10122', '10123', '10124', '10125', '10126', '10128', '10129', '10130', '10131', '10132', '10133', '10138', '10150', '10151', '10152', '10153', '10154', '10155', '10156', '10157', '10158', '10159',
	              '10160', '10161', '10162', '10163', '10164', '10165', '10166', '10167', '10168', '10169', '10170', '10171', '10172', '10173', '10174', '10175', '10176', '10177', '10178', '10179', '10185', '10199', '10203', '10211', '10212',
	              '10213', '10242', '10249', '10256', '10257', '10258', '10259', '10260', '10261', '10265', '10268', '10269', '10270', '10271', '10272', '10273', '10274', '10275', '10276', '10277', '10278', '10279', '10280', '10281', '10282',
	              '10285', '10286', '10292', '10301', '10302', '10303', '10304', '10305', '10306', '10307', '10308', '10309', '10310', '10311', '10312', '10313', '10314', '10451', '10452', '10453', '10454', '10455', '10456', '10457', '10458',
	              '10459', '10460', '10461', '10462', '10463', '10464', '10465', '10466', '10467', '10468', '10469', '10470', '10471', '10472', '10473', '10474', '10475', '10501', '10502', '10503', '10504', '10505', '10506', '10507', '10509',
	              '10510', '10511', '10512', '10514', '10516', '10517', '10518', '10519', '10520', '10521', '10522', '10523', '10524', '10526', '10527', '10528', '10530', '10532', '10533', '10535', '10536', '10537', '10538', '10540', '10541',
	              '10542', '10543', '10545', '10546', '10547', '10548', '10549', '10550', '10551', '10552', '10553', '10560', '10562', '10566', '10567', '10570', '10573', '10576', '10577', '10578', '10579', '10580', '10583', '10587', '10588',
	              '10589', '10590', '10591', '10594', '10595', '10596', '10597', '10598', '10601', '10602', '10603', '10604', '10605', '10606', '10607', '10610', '10701', '10702', '10703', '10704', '10705', '10706', '10707', '10708', '10709',
	              '10710', '10801', '10802', '10803', '10804', '10805', '10901', '10910', '10911', '10912', '10913', '10914', '10915', '10916', '10917', '10918', '10919', '10920', '10921', '10922', '10923', '10924', '10925', '10926', '10927',
	              '10928', '10930', '10931', '10932', '10933', '10940', '10941', '10949', '10950', '10952', '10953', '10954', '10956', '10958', '10959', '10960', '10962', '10963', '10964', '10965', '10968', '10969', '10970', '10973', '10974',
	              '10975', '10976', '10977', '10979', '10980', '10981', '10982', '10983', '10984', '10985', '10986', '10987', '10988', '10989', '10990', '10992', '10993', '10994', '10996', '10997', '10998', '11001', '11002', '11003', '11004',
	              '11005', '11010', '11020', '11021', '11022', '11023', '11024', '11026', '11027', '11030', '11040', '11042', '11050', '11051', '11052', '11053', '11054', '11055', '11096', '11101', '11102', '11103', '11104', '11105', '11106',
	              '11109', '11120', '11201', '11202', '11203', '11204', '11205', '11206', '11207', '11208', '11209', '11210', '11211', '11212', '11213', '11214', '11215', '11216', '11217', '11218', '11219', '11220', '11221', '11222', '11223',
	              '11224', '11225', '11226', '11228', '11229', '11230', '11231', '11232', '11233', '11234', '11235', '11236', '11237', '11238', '11239', '11241', '11242', '11243', '11245', '11247', '11249', '11251', '11252', '11256', '11351',
	              '11352', '11354', '11355', '11356', '11357', '11358', '11359', '11360', '11361', '11362', '11363', '11364', '11365', '11366', '11367', '11368', '11369', '11370', '11371', '11372', '11373', '11374', '11375', '11377', '11378',
	              '11379', '11380', '11381', '11385', '11386', '11405', '11411', '11412', '11413', '11414', '11415', '11416', '11417', '11418', '11419', '11420', '11421', '11422', '11423', '11424', '11425', '11426', '11427', '11428', '11429',
	              '11430', '11431', '11432', '11433', '11434', '11435', '11436', '11439', '11451', '11499', '11501', '11507', '11509', '11510', '11514', '11516', '11518', '11520', '11530', '11531', '11542', '11545', '11547', '11548', '11549',
	              '11550', '11551', '11552', '11553', '11554', '11555', '11556', '11557', '11558', '11559', '11560', '11561', '11563', '11565', '11566', '11568', '11569', '11570', '11571', '11572', '11575', '11576', '11577', '11579', '11580',
	              '11581', '11582', '11590', '11596', '11598', '11599', '11690', '11691', '11692', '11693', '11694', '11695', '11697', '11701', '11702', '11703', '11704', '11705', '11706', '11707', '11709', '11710', '11713', '11714', '11715',
	              '11716', '11717', '11718', '11719', '11720', '11721', '11722', '11724', '11725', '11726', '11727', '11729', '11730', '11731', '11732', '11733', '11735', '11737', '11738', '11739', '11740', '11741', '11742', '11743', '11746',
	              '11747', '11749', '11751', '11752', '11753', '11754', '11755', '11756', '11757', '11758', '11760', '11762', '11763', '11764', '11765', '11766', '11767', '11768', '11769', '11770', '11771', '11772', '11773', '11775', '11776',
	              '11777', '11778', '11779', '11780', '11782', '11783', '11784', '11786', '11787', '11788', '11789', '11790', '11791', '11792', '11793', '11794', '11795', '11796', '11797', '11798', '11801', '11802', '11803', '11804', '11815',
	              '11819', '11853', '11854', '11901', '11930', '11931', '11932', '11933', '11934', '11935', '11937', '11939', '11940', '11941', '11942', '11944', '11946', '11947', '11948', '11949', '11950', '11951', '11952', '11953', '11954',
	              '11955', '11956', '11957', '11958', '11959', '11960', '11961', '11962', '11963', '11964', '11965', '11967', '11968', '11969', '11970', '11971', '11972', '11973', '11975', '11976', '11977', '11978', '11980', '12401', '12402',
	              '12404', '12409', '12410', '12411', '12412', '12416', '12417', '12419', '12420', '12428', '12429', '12432', '12433', '12435', '12440', '12441', '12443', '12446', '12448', '12449', '12453', '12455', '12456', '12457', '12458',
	              '12461', '12464', '12465', '12466', '12471', '12472', '12475', '12477', '12480', '12481', '12483', '12484', '12486', '12487', '12489', '12490', '12491', '12493', '12494', '12495', '12498', '12501', '12504', '12506', '12507',
	              '12508', '12510', '12511', '12512', '12514', '12515', '12518', '12520', '12522', '12524', '12525', '12527', '12528', '12531', '12533', '12537', '12538', '12540', '12542', '12543', '12545', '12546', '12547', '12548', '12549',
	              '12550', '12551', '12552', '12553', '12555', '12561', '12563', '12564', '12566', '12567', '12568', '12569', '12570', '12571', '12572', '12574', '12575', '12577', '12578', '12580', '12581', '12582', '12583', '12584', '12585',
	              '12586', '12588', '12589', '12590', '12592', '12594', '12601', '12602', '12603', '12604', '12701', '12719', '12720', '12721', '12722', '12723', '12724', '12725', '12726', '12727', '12729', '12732', '12733', '12734', '12736',
	              '12737', '12738', '12740', '12741', '12742', '12743', '12745', '12746', '12747', '12748', '12749', '12750', '12751', '12752', '12754', '12758', '12759', '12760', '12762', '12763', '12764', '12765', '12766', '12767', '12768',
	              '12769', '12770', '12771', '12775', '12776', '12777', '12778', '12779', '12780', '12781', '12783', '12784', '12785', '12786', '12787', '12788', '12789', '12790', '12791', '12792', '18001', '18002', '18003', '18010', '18011',
	              '18013', '18014', '18015', '18016', '18017', '18018', '18020', '18025', '18031', '18032', '18034', '18035', '18036', '18037', '18038', '18039', '18040', '18041', '18042', '18043', '18044', '18045', '18046', '18049', '18050',
	              '18051', '18052', '18053', '18054', '18055', '18058', '18059', '18060', '18062', '18063', '18064', '18065', '18066', '18067', '18068', '18069', '18070', '18071', '18072', '18073', '18074', '18076', '18077', '18078', '18079',
	              '18080', '18081', '18083', '18084', '18085', '18086', '18087', '18088', '18091', '18092', '18098', '18099', '18101', '18102', '18103', '18104', '18105', '18106', '18109', '18195', '18210', '18301', '18302', '18320', '18321',
	              '18322', '18323', '18324', '18325', '18326', '18327', '18328', '18330', '18331', '18332', '18333', '18334', '18335', '18336', '18337', '18340', '18341', '18342', '18343', '18344', '18346', '18347', '18348', '18349', '18350',
	              '18351', '18352', '18353', '18354', '18355', '18356', '18357', '18360', '18370', '18371', '18372', '18405', '18415', '18417', '18421', '18424', '18425', '18426', '18427', '18428', '18431', '18435', '18436', '18437', '18438',
	              '18439', '18443', '18444', '18445', '18449', '18451', '18453', '18454', '18455', '18456', '18457', '18458', '18459', '18460', '18461', '18462', '18463', '18464', '18466', '18469', '18472', '18473', '18610', '18847', '18901',
	              '18902', '18910', '18911', '18912', '18913', '18914', '18915', '18916', '18917', '18918', '18920', '18921', '18922', '18923', '18924', '18925', '18927', '18928', '18929', '18930', '18931', '18932', '18933', '18934', '18935',
	              '18936', '18938', '18940', '18942', '18943', '18944', '18946', '18947', '18949', '18950', '18951', '18953', '18954', '18955', '18956', '18957', '18958', '18960', '18962', '18963', '18964', '18966', '18968', '18969', '18970',
	              '18971', '18972', '18974', '18976', '18977', '18979', '18980', '18981', '18991', '19001', '19002', '19003', '19004', '19006', '19007', '19009', '19010', '19012', '19019', '19020', '19021', '19025', '19027', '19030', '19031',
	              '19034', '19035', '19038', '19040', '19041', '19044', '19046', '19047', '19048', '19049', '19053', '19054', '19055', '19056', '19057', '19058', '19066', '19067', '19072', '19075', '19085', '19087', '19090', '19092', '19093',
	              '19095', '19096', '19099', '19101', '19102', '19103', '19104', '19105', '19106', '19107', '19108', '19109', '19110', '19111', '19112', '19114', '19115', '19116', '19118', '19119', '19120', '19121', '19122', '19123', '19124',
	              '19125', '19126', '19127', '19128', '19129', '19130', '19131', '19132', '19133', '19134', '19135', '19136', '19137', '19138', '19139', '19140', '19141', '19142', '19143', '19144', '19145', '19146', '19147', '19148', '19149',
	              '19150', '19151', '19152', '19153', '19154', '19155', '19160', '19161', '19162', '19170', '19171', '19172', '19173', '19175', '19176', '19177', '19178', '19179', '19181', '19182', '19183', '19184', '19185', '19187', '19188',
	              '19190', '19191', '19192', '19193', '19194', '19195', '19196', '19197', '19244', '19255', '19401', '19403', '19404', '19405', '19406', '19407', '19408', '19409', '19415', '19422', '19423', '19424', '19426', '19428', '19429',
	              '19430', '19435', '19436', '19437', '19438', '19440', '19441', '19443', '19444', '19446', '19450', '19451', '19453', '19454', '19455', '19456', '19460', '19462', '19464', '19468', '19472', '19473', '19474', '19477', '19478',
	              '19484', '19486', '19490', '19492', '19504', '19505', '19512', '19525', '19529', '19530', '19539'];

	$marylandZips = ['21020', '21022', '21023', '21027', '21030', '21031', '21043', '21051', '21052', '21053', '21057', '21065', '21071', '21074', '21082', '21087', '21092', '21093', '21094', '21102', '21104', '21105', '21111', '21117', '21120',
	                 '21128', '21131', '21133', '21136', '21139', '21152', '21153', '21155', '21156', '21161', '21162', '21163', '21204', '21206', '21207', '21208', '21209', '21210', '21212', '21215', '21219', '21220', '21221', '21222', '21224',
	                 '21227', '21228', '21229', '21234', '21236', '21237', '21239', '21244', '21250', '21252', '21282', '21284', '21285', '21286', '20588', '20701', '20723', '20759', '20763', '20777', '20794', '20833', '21029', '21036', '21041',
	                 '21042', '21044', '21045', '21046', '21075', '21076', '21150', '21723', '21737', '21738', '21765', '21771', '21784', '21794', '21797', '21048', '21088', '21157', '21158', '21757', '21776', '21787', '21791', '20711', '20714',
	                 '20724', '20733', '20751', '20754', '20755', '20758', '20764', '20765', '20776', '20778', '20779', '21012', '21032', '21035', '21037', '21054', '21056', '21060', '21061', '21062', '21077', '21090', '21106', '21108', '21113',
	                 '21114', '21122', '21123', '21140', '21144', '21146', '21225', '21226', '21240', '21401', '21402', '21403', '21404', '21405', '21409', '21411', '21412', '20001', '20002', '20003', '20004', '20005', '20006', '20007', '20008',
	                 '20009', '20010', '20011', '20012', '20013', '20015', '20016', '20017', '20018', '20019', '20020', '20022', '20024', '20026', '20027', '20029', '20030', '20032', '20033', '20035', '20036', '20037', '20038', '20039', '20040',
	                 '20041', '20042', '20043', '20044', '20045', '20047', '20049', '20050', '20052', '20053', '20055', '20056', '20057', '20058', '20059', '20060', '20061', '20062', '20063', '20064', '20065', '20066', '20067', '20068', '20069',
	                 '20070', '20071', '20073', '20074', '20075', '20076', '20077', '20078', '20080', '20081', '20082', '20090', '20091', '20201', '20202', '20203', '20204', '20206', '20207', '20208', '20210', '20211', '20212', '20213', '20214',
	                 '20215', '20216', '20217', '20218', '20219', '20220', '20221', '20222', '20223', '20224', '20226', '20227', '20228', '20229', '20230', '20232', '20233', '20235', '20237', '20238', '20239', '20240', '20241', '20242', '20244',
	                 '20245', '20250', '20251', '20252', '20254', '20260', '20261', '20262', '20265', '20266', '20268', '20270', '20277', '20289', '20299', '20301', '20303', '20306', '20310', '20314', '20317', '20318', '20319', '20330', '20340',
	                 '20350', '20355', '20370', '20372', '20373', '20374', '20375', '20376', '20380', '20388', '20389', '20390', '20391', '20392', '20393', '20394', '20395', '20398', '20401', '20402', '20403', '20404', '20405', '20406', '20407',
	                 '20408', '20409', '20410', '20411', '20412', '20413', '20414', '20415', '20416', '20417', '20418', '20419', '20420', '20421', '20422', '20423', '20424', '20425', '20426', '20427', '20428', '20429', '20431', '20433', '20434',
	                 '20435', '20436', '20437', '20439', '20440', '20441', '20442', '20444', '20447', '20451', '20453', '20456', '20460', '20463', '20468', '20469', '20470', '20472', '20500', '20501', '20502', '20503', '20504', '20505', '20506',
	                 '20507', '20508', '20509', '20510', '20511', '20515', '20520', '20521', '20522', '20523', '20524', '20525', '20526', '20527', '20528', '20529', '20530', '20531', '20533', '20534', '20535', '20536', '20537', '20538', '20539',
	                 '20540', '20541', '20542', '20543', '20544', '20546', '20547', '20548', '20549', '20551', '20552', '20553', '20554', '20555', '20557', '20559', '20560', '20565', '20566', '20570', '20571', '20572', '20573', '20575', '20576',
	                 '20577', '20578', '20579', '20580', '20581', '20585', '20586', '20590', '20591', '20593', '20594', '20597', '20599', '56901', '56902', '56904', '56908', '56915', '56920', '56933', '56935', '56944', '56945', '56950', '56965',
	                 '56967', '56972', '56998', '56999', '22201', '22202', '22203', '22204', '22205', '22206', '22207', '22209', '22210', '22211', '22212', '22213', '22214', '22215', '22216', '22217', '22219', '22225', '22226', '22227', '22230',
	                 '22240', '22241', '22242', '22243', '22244', '22245', '22246', '22301', '22302', '22304', '22305', '22311', '22312', '22313', '22314', '22320', '22331', '22332', '22333', '22334', '22350', '20120', '20121', '20122', '20124',
	                 '20151', '20153', '20170', '20171', '20172', '20190', '20191', '20192', '20194', '20195', '20196', '22003', '22009', '22015', '22027', '22030', '22031', '22032', '22033', '22034', '22035', '22036', '22037', '22039', '22041',
	                 '22042', '22043', '22044', '22046', '22060', '22066', '22067', '22079', '22081', '22082', '22095', '22096', '22101', '22102', '22103', '22106', '22107', '22108', '22109', '22116', '22118', '22119', '22121', '22122', '22124',
	                 '22150', '22151', '22152', '22153', '22156', '22158', '22159', '22160', '22161', '22180', '22181', '22182', '22183', '22185', '22199', '22303', '22306', '22307', '22308', '22309', '22310', '22315', '23801', '23805', '23830',
	                 '23842', '23860', '23875', '23881', '20109', '20110', '20111', '20112', '20136', '20137', '20143', '20155', '20156', '20168', '20169', '20181', '20182', '22025', '22026', '22125', '22134', '22172', '22191', '22192', '22193',
	                 '22194', '22195', '20101', '20102', '20103', '20104', '20105', '20117', '20118', '20129', '20130', '20131', '20132', '20134', '20135', '20141', '20142', '20146', '20147', '20148', '20149', '20152', '20158', '20159', '20160',
	                 '20163', '20164', '20165', '20166', '20167', '20175', '20176', '20177', '20178', '20180', '20184', '20189', '20197', '20598'];
	// 199 per order
	$special199 = ['20615', '20629', '20639', '20657', '20676', '20678', '20685', '20688', '20689', '20714', '20732', '20736', '20754', '20601', '20602', '20603', '20604', '20611', '20612', '20613', '20616', '20617', '20622', '20625', '20632',
	               '20637', '20640', '20643', '20645', '20646', '20658', '20659', '20661', '20662', '20664', '20675', '20677', '20682', '20693', '20695', '20842', '20871', '21701', '21702', '21703', '21704', '21705', '21709', '21710', '21714',
	               '21716', '21717', '21718', '21727', '21754', '21755', '21757', '21758', '21759', '21762', '21769', '21770', '21771', '21773', '21774', '21775', '21776', '21777', '21778', '21780', '21783', '21787', '21788', '21790', '21791',
	               '21792', '21793', '21798', '21001', '21005', '21009', '21010', '21013', '21014', '21015', '21017', '21018', '21028', '21034', '21040', '21047', '21050', '21078', '21082', '21084', '21085', '21087', '21111', '21130', '21132',
	               '21154', '21160', '21161', '21607', '21617', '21619', '21620', '21623', '21628', '21638', '21640', '21644', '21649', '21651', '21656', '21657', '21658', '21666', '21668', '21679', '21690', '20606', '20609', '20618', '20619',
	               '20620', '20621', '20624', '20626', '20627', '20628', '20630', '20634', '20635', '20636', '20650', '20653', '20656', '20660', '20667', '20670', '20674', '20680', '20684', '20686', '20687', '20690', '20692', '20106', '20115',
	               '20116', '20117', '20119', '20128', '20130', '20137', '20138', '20139', '20140', '20144', '20181', '20184', '20185', '20186', '20187', '20188', '20198', '22639', '22642', '22643', '22712', '22720', '22728', '22734', '22739',
	               '22742', '22135', '22403', '22405', '22406', '22412', '22430', '22463', '22471', '22545', '22554', '22555', '22556'];
	// 299 per order
	$special299 = ['19902', '19903', '19904', '19905', '19906', '19934', '19936', '19938', '19943', '19946', '19950', '19952', '19953', '19954', '19955', '19961', '19962', '19963', '19964', '19977', '19979', '19980', '19701', '19702', '19703',
	               '19706', '19707', '19708', '19709', '19710', '19711', '19712', '19713', '19714', '19715', '19716', '19717', '19718', '19720', '19721', '19725', '19726', '19730', '19731', '19732', '19733', '19734', '19735', '19736', '19801',
	               '19802', '19803', '19804', '19805', '19806', '19807', '19808', '19809', '19810', '19850', '19880', '19884', '19885', '19886', '19890', '19891', '19892', '19893', '19894', '19895', '19896', '19897', '19898', '19899', '19930',
	               '19931', '19933', '19939', '19940', '19941', '19944', '19945', '19947', '19951', '19956', '19958', '19960', '19966', '19967', '19968', '19969', '19970', '19971', '19973', '19975', '21609', '21629', '21632', '21636', '21639',
	               '21640', '21641', '21649', '21655', '21657', '21660', '21670', '21901', '21902', '21903', '21904', '21911', '21912', '21913', '21914', '21915', '21916', '21917', '21918', '21919', '21920', '21921', '21922', '21930', '21613',
	               '21622', '21626', '21627', '21631', '21634', '21643', '21648', '21659', '21664', '21669', '21672', '21675', '21677', '21835', '21869', '21610', '21620', '21635', '21645', '21650', '21651', '21661', '21667', '21678', '21817',
	               '21821', '21822', '21824', '21836', '21838', '21851', '21853', '21857', '21866', '21867', '21871', '21890', '21601', '21612', '21624', '21625', '21647', '21652', '21653', '21654', '21662', '21663', '21665', '21671', '21673',
	               '21676', '21679', '21711', '21713', '21715', '21719', '21720', '21721', '21722', '21733', '21734', '21740', '21741', '21742', '21746', '21747', '21749', '21750', '21756', '21758', '21767', '21779', '21780', '21781', '21782',
	               '21783', '21795', '21801', '21802', '21803', '21804', '21810', '21814', '21826', '21830', '21837', '21840', '21849', '21850', '21852', '21856', '21861', '21865', '21874', '21875', '21811', '21813', '21829', '21841', '21842',
	               '21843', '21862', '21863', '21864', '21872', '17019', '17070', '17302', '17309', '17311', '17312', '17313', '17314', '17315', '17316', '17317', '17318', '17319', '17321', '17322', '17323', '17327', '17329', '17331', '17332',
	               '17333', '17334', '17335', '17339', '17342', '17345', '17347', '17349', '17352', '17354', '17355', '17356', '17358', '17360', '17361', '17362', '17363', '17364', '17365', '17366', '17368', '17370', '17371', '17372', '17401',
	               '17402', '17403', '17404', '17405', '17406', '17407', '17408', '25401', '25402', '25403', '25404', '25405', '25413', '25419', '25420', '25421', '25427', '25428', '25430', '25440', '25443', '22401', '22402', '22404'];

    $countUpholsteredItems = 0;
	$countSectionals = 0;
	$countAncillaryItems = 0;
	$countOttoman = 0;
	$countNoCharge = 0;
	$countEndTableSets = 0;
	$countCoffeeTables = 0;
	$countSofabedMattresses = 0;
    $countSlipCovers = 0;
	$countChairs = 0;
	$countExtraItems = 0;
	$countMattresses = 0;
    $countBeds = 0;

	$total = 0;

    $sofas = getcollection(164399431);
    $loveseats = getcollection(165576839);
    $sofaChairs = getcollection(164404423);
    $chaises = getcollection(164404999);
    $sectionals = getcollection(164399495);
    $upholstery = array_merge($sofas, $loveseats, $chaises);
    $ottomans = getcollection(164404615);
    $rugs = getcollection(164695111);
    $coffeeTables = getcollection(175836423);
    $endTables = getcollection(177331207);
    $coffeeTableSets = getcollection(215248519);
    $beds = getcollection(164691847);
    $bedroomsets = getcollection(164243399);
    $mattresses = getcollection(164243911);
    $lightings = getcollection(164695815);
    $sofabedMattresses = getcollection(215383943);
    $slipCovers = getcollection(215388231);
    $recliners = getcollection(164399559);
    $chairs = array_merge($recliners, $sofaChairs);


    $beds = getcollection(164691847);
    $livingSets = getcollection(236398215);
    $dinetteSets = getcollection(215424903);
    $bedroomSets = getcollection(164243399);
    $diningSets = getcollection(164693319);
    $featured = getcollection(217210247);
// 	Check for long distance or local



    if (in_array($DATA['destination']['postal_code'], array_merge($localZips, $marylandZips))){

    	foreach ($DATA['items'] as $item) {
	        if (in_array($item['product_id'], $upholstery)) {
	            $countUpholsteredItems += $item['quantity'] * $item['grams'];
	        } elseif (in_array($item['product_id'], $sectionals)) {
	            $countSectionals += $item['quantity'];
	            $countExtraItems += $item['quantity'] * $item['grams'];
	        } elseif (in_array($item['product_id'], $mattresses)) {
	            /* Mattress Sale*/
	            if ($item['price'] < 599) {
	                $countMattresses += $item['quantity'];
	            }
	        } elseif (in_array($item['product_id'], $endTables)) {
	            $countEndTableSets += $item['quantity'] * $item['grams'] / 2;
	        } elseif (in_array($item['product_id'], $endTables)) {
	            $countCoffeeTables += $item['quantity'];
	        } elseif (in_array($item['product_id'], $lightings)) {
	            $countAncillaryItems += $item['quantity'] * $item['grams'] * 1/2;
	        } elseif (in_array($item['product_id'], $sofabedMattresses)) {
	            $countSofabedMattresses += $item['quantity'];
	            $countExtraItems += $item['quantity'];
	        } elseif (in_array($item['product_id'], $slipCovers)) {
	            $countSlipCovers += $item['quantity'];
	        } elseif (in_array($item['product_id'], $beds)) {
	            $countBeds += $item['quantity'];
	            $countExtraItems += $item['quantity'];
	        }elseif (in_array($item['product_id'], $dinetteSets)) {
	            $countDinetteSets += $item['quantity']; // Num of Sets
	            $countExtraItems += $item['quantity'] * $item['grams']; // Num of Pieces
	        }elseif (in_array($item['product_id'], $chairs)) {
	            $countChairs += $item['quantity'] * $item['grams'];
	            $countExtraItems += $countChairs; // Num of Pieces
	        } elseif (in_array($item['product_id'], $bedroomSets) or in_array($item['product_id'], $diningSets) or in_array($item['product_id'], $livingSets)) {
	            if (in_array($item['product_id'], $featured)) {
	                $total += 199.99 * $item['quantity'];
	            } elseif(in_array($item['product_id'], $livingSets)) {
	                $countUpholsteredItems += $item['quantity'] * $item['grams'];
	            } elseif ($item['price'] < 1000) {
	                $total += 99.99 * $item['quantity'];
	            } elseif ($item['price'] < 2000) {
	                $total += 169.99 * $item['quantity'];
	            } else {
	                $total += 199.99 * $item['quantity'];
	            }
	            $countExtraItems += $item['quantity'] * $item['grams']; // Num of Pieces
	        }
	        else {
	            $countAncillaryItems += $item['quantity'] * $item['grams'];

	        }

	    }

        /* Update coffee table sets into ancillary items*/
        $countAncillaryItems += $countCoffeeTables;
        $countEndTableSets = ceil($countEndTableSets);
        if ($countEndTableSets > $countCoffeeTables) {
            $countAncillaryItems += $countEndTableSets - $countCoffeeTables;
        }

        $countItems = $countUpholsteredItems + $countAncillaryItems + $countExtraItems;

        /* Calculation for SofabedMattresses with conditions */
        if ($countUpholsteredItems > 0) {
            $total += $countSofabedMattresses * 29.99;
        } else {
            $countAncillaryItems += $countSofabedMattresses;
        }

        $total += $countBeds * 89.99;
        $total += $countDinetteSets * 99.99;


        $total += $countMattresses * 79.99;


        /* Calculation for Recliner and Chair */
        if ($countChairs == 1) {
            $total += 89.99;
        } elseif ($countChairs == 2) {
            $total += 99.99;
        } elseif ($countChair > 2) {
            $total += 199.99;
        }
        /* Calculation for Sectionals */
        if ($countSectionals > 0) {
            $total += 199.99;
        }

	    if ($countUpholsteredItems > 0) {
	        if ($countUpholsteredItems == 1) {
	            $total += 99.99;
	        } else {
	            $total += 199.99;
	        }
	        $total += $countAncillaryItems * 39.99;
	    } else {
	        $total += $countAncillaryItems * 69.99;
	    }

        /* Capping the shipping cost by number of items */
        if ($countItems <= 15 and $total > 199.99) {
	        $total = 199.99;
	    } elseif ($countItems > 15) {
	        $total = 274.99;
	    }
    } else {
        $countItems = 0;
        foreach ($DATA['items'] as $item) {
            if (!in_array($item['product_id'], $slipCovers)) {
                $countItems += $item['quantity'] * $item['grams'];
            }
        }
        /*
        foreach (range(1, $countItems) as $number) {
                    if ($number == 1) {
                        $total += 299.99;
                    } elseif ($number <= 3) {
                        $total += 50;
                    } elseif ($number <= 5) {
                        $total += 35;
                    } elseif ($number > 5) {
                        $total += 25;
                    }
                }
        */

        if ($countItems > 0) {
            if (in_array($DATA['destination']['postal_code'], $special199)) {
                $total += 199;
            } elseif (in_array($DATA['destination']['postal_code'], $special299)) {
                $total += 299;
            } else {
                foreach (range(1, $countItems) as $number) {
                    if ($number == 1) {
                        $total += 299.99;
                    } elseif ($number <= 3) {
                        $total += 50;
                    } elseif ($number <= 5) {
                        $total += 35;
                    } elseif ($number > 5) {
                        $total += 25;
                    }
                }
            }
        }

    }

	$total += $countSlipCovers * 30;


	$_RATES[0] = array(
		"service_name" => "Standard Shipping", //this is what the customer will see
		"service_code" => "STANDARD_SHIPPING", //can be anything you like
		"total_price" => $total * 100, //in cents
		"currency" => "USD",
	);


	return $_RATES;

	/* do not edit below this line */

}
